(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{1010:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:m,...p}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return r.displayName=s(e),r}},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8485:(e,t,r)=>{Promise.resolve().then(r.bind(r,9638))},9638:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5155),s=r(2115),l=r(1010),n=r(1360),i=r(6191);function o(){let[e,t]=(0,s.useState)("companies"),[r,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[b,x]=(0,s.useState)(!0),[h,u]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v()},[]);let v=async()=>{x(!0);try{let[e,t,r]=await Promise.all([fetch("/api/companies"),fetch("/api/tags"),fetch("/api/scopes")]);e.ok&&o(await e.json()),t.ok&&d(await t.json()),r.ok&&p(await r.json())}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}},f=async(e,t)=>{if(confirm("คุณแน่ใจหรือไม่ที่จะลบข้อมูลนี้?"))try{(await fetch("/api/".concat(t,"/").concat(e),{method:"DELETE"})).ok?v():alert("ไม่สามารถลบข้อมูลได้ (อาจมีการใช้งานอยู่)")}catch(e){console.error("Error deleting:",e)}},j=async t=>{t.preventDefault();let r=!!(null==h?void 0:h.id),a=r?"/api/".concat(e,"/").concat(h.id):"/api/".concat(e);try{(await fetch(a,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?(u(null),y(!1),v()):alert("เกิดข้อผิดพลาดในการบันทึก")}catch(e){console.error("Error saving:",e)}},k=(t,r)=>(0,a.jsx)("div",{className:"bg-[rgb(var(--bg-primary))] rounded-lg shadow overflow-hidden border border-[rgb(var(--border-color))]",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[rgb(var(--border-color))]",children:[(0,a.jsx)("thead",{className:"bg-[rgb(var(--bg-secondary))]",children:(0,a.jsxs)("tr",{children:[r.map(e=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[rgb(var(--text-secondary))] uppercase tracking-wider",children:e.label},e.key)),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[rgb(var(--text-secondary))] uppercase tracking-wider",children:"จัดการ"})]})}),(0,a.jsx)("tbody",{className:"bg-[rgb(var(--bg-primary))] divide-y divide-[rgb(var(--border-color))]",children:t.map(t=>(0,a.jsxs)("tr",{children:[r.map(e=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[rgb(var(--text-primary))]",children:t[e.key]},e.key)),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{u(t),y(!1)},className:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400 mr-4",children:(0,a.jsx)(l.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>f(t.id,e),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",children:(0,a.jsx)(n.A,{size:18})})]})]},t.id))})]})});return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[rgb(var(--text-primary))]",children:"จัดการข้อมูลหลัก (Master Data)"}),(0,a.jsxs)("button",{onClick:()=>{u({}),y(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(i.A,{size:20}),(0,a.jsx)("span",{children:"เพิ่มข้อมูล"})]})]}),(0,a.jsx)("div",{className:"mb-6 border-b border-[rgb(var(--border-color))]",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:["companies","tags","scopes"].map(r=>(0,a.jsx)("button",{onClick:()=>t(r),className:"\n                whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm capitalize\n                ".concat(e===r?"border-blue-500 text-blue-600":"border-transparent text-[rgb(var(--text-secondary))] hover:text-[rgb(var(--text-primary))] hover:border-[rgb(var(--border-color))]","\n              "),children:r},r))})}),b?(0,a.jsx)("div",{className:"text-center py-10",children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:["companies"===e&&k(r,[{key:"name",label:"ชื่อบริษัท"},{key:"contact_person",label:"ผู้ติดต่อ"},{key:"phone",label:"เบอร์โทร"}]),"tags"===e&&k(c,[{key:"name",label:"ชื่อ Tag"},{key:"description",label:"คำอธิบาย"}]),"scopes"===e&&k(m,[{key:"standard_code",label:"Standard Code"},{key:"description",label:"Description"}])]}),(h||g)&&(()=>{let t="companies"===e?[{name:"name",label:"ชื่อบริษัท"},{name:"address",label:"ที่อยู่"},{name:"contact_person",label:"ผู้ติดต่อ"},{name:"email",label:"อีเมล"},{name:"phone",label:"เบอร์โทร"}]:"tags"===e?[{name:"name",label:"ชื่อ Tag"},{name:"description",label:"คำอธิบาย"}]:[{name:"standard_code",label:"Standard Code"},{name:"description",label:"Description"}];return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-[rgb(var(--bg-primary))] rounded-lg shadow-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4 text-[rgb(var(--text-primary))]",children:(null==h?void 0:h.id)?"แก้ไขข้อมูล":"เพิ่มข้อมูลใหม่"}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[t.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[rgb(var(--text-primary))] mb-1",children:e.label}),(0,a.jsx)("input",{type:"text",required:"name"===e.name||"standard_code"===e.name,value:(null==h?void 0:h[e.name])||"",onChange:t=>u({...h,[e.name]:t.target.value}),className:"w-full px-3 py-2 border border-[rgb(var(--border-color))] rounded-lg bg-[rgb(var(--bg-secondary))] text-[rgb(var(--text-primary))]"})]},e.name)),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{u(null),y(!1)},className:"px-4 py-2 text-sm text-[rgb(var(--text-secondary))]",children:"ยกเลิก"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"บันทึก"})]})]})]})})})})()]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=8485)),_N_E=e.O()}]);